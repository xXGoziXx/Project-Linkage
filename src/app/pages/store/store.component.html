<div class="content">
  <div class="min-h-screen flex flex-col px-4 mx-auto nav-pad black-filter">
    <div id="nav"
         class="flex flex-row invisible">
      <div class="nav-items grow"
           [ngClass]="{active: isFirst}"
           *ngFor="let products of
                 productService.products; let isFirst = first; ">
        <h3>{{products.name}}</h3>
      </div>
    </div>
    <div class="flex flex-col gap-5 mb-5">
      <div [id]="products.name"
           *ngFor="let products of productService.products">
        <h2 class="uppercase">{{products.name}}</h2>
        <div class="flex flex-wrap ">
          <!-- Product Items -->
          <div class="pt-4 px-1 basis-1/3 md:basis-1/6 product"
               [id]="i"
               *ngFor="let product of productService.sortBy(products.items, 'order'); index as i;">
            <img [src]="product.images[0].src"
                 alt="{{product.images[0].alt}}"
                 (click)="productService.viewProduct = true;selectProduct(product);">
            <p class="mt-2 uppercase text-center product-title">{{product.name}}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div id="product-view"
     *ngIf="productService.showProductCard"
     class="h-screen w-screen fixed">
  <img src="../../../assets/img/desktop-store-bg.jpg"
       alt=""
       class="sm:hidden md:block background-image" />
  <img src="../../../assets/img/mobile-store-bg.jpg"
       alt=""
       class="sm:block md:hidden background-image" />
  <div id="card-container"
       class="absolute h-screen w-screen grid place-content-center">
    <div class="card relative mt-2.5 w-min border-2 border-solid border-white">
      <h2 class="mt-3 text-center uppercase"> {{productService.selectedProduct.name}}</h2>
      <div id="sliders"
           class="mx-auto"
           [ngClass]="{'opacity-1': productService.preview, 'opacity-0': !productService.preview}">
        <div id="main-slider"
             class="splide mx-auto mt-1 px-12 ">
          <div class="splide__track">
            <ul class="splide__list">
              <li class="splide__slide"
                  *ngFor="let image of productService.sortBy(productService.selectedProduct.images, 'order');">
                <img alt="{{image.alt}}"
                     [defaultImage]="defaultImage"
                     [lazyLoad]="image.src"
                     [src]="image.src" />
              </li>
            </ul>
          </div>
        </div>
        <div id="thumbnail-slider"
             class="splide mx-auto px-12 py-3">
          <div class="splide__track">
            <ul class="splide__list">
              <li class="splide__slide"
                  *ngFor="let image of productService.sortBy(productService.selectedProduct.images, 'order')">
                <img alt="{{image.alt}}"
                     [defaultImage]="defaultImage"
                     [lazyLoad]="image.src"
                     [src]="image.src" />

              </li>
            </ul>
          </div>
        </div>
      </div>
      <ng-container *ngIf="!productService.preview">
        <div id="preview-description"
             class="absolute w-full h-full inset-0 bg-no-repeat bg-cover bg-scroll "
             [ngStyle]="{'backgroundImage': 'url(' + selectedProductFirstImage.src + ')'}">
          <div [ngClass]="{'opacity-100': !productService.preview, 'opacity-0' : productService.preview}"
               class="details-container grid justify-items-center content-between relative w-full h-full p-3">
            <h2 class="relative text-center uppercase"> {{productService.selectedProduct.name}}</h2>
            <div>
              <h4 class="relative mt-5 mb-2 text-center uppercase">Description</h4>
              <div class="description overflow-y-auto mb-3">
                <p class="text-center">
                  {{productService.selectedProduct.description}}
                </p>
              </div>
            </div>
            <div class="price mb-2 sm:mb-0">

              <div *ngIf="selectedProductSizes"
                   class="size">
                <h3 class="mr-1"> Size: </h3>
                <div *ngFor="let size of productService.selectedProduct.sizes; index as i"
                     [ngClass]="{'active': size.selected}"
                     (click)="selectSize(i)"
                     class="size-btn"> {{size.name}}</div>
              </div>
              <h3 class="price mt-2">
                Price: <span class="secondary-font"> {{productService.selectedProduct.price | currency: 'EUR' }} </span>
              </h3>
            </div>
            <button class="btn hidden sm:block bg-blur relative add-button"
                    (click)="productService.addToCart(productService.selectedProduct)"
                    [disabled]="checkSize()">Add to cart
            </button>

          </div>
        </div>
      </ng-container>
      <div class="absolute w-full preview-toggler flex justify-center gap-5">
        <div class="preview-button grid place-content-center text-center pop"
             (click)="productService.viewProduct = false;this.productService.preview = true;">
          <!-- <img src="../../../assets/icons/close.svg"
               alt="close preview"> -->
          <img alt="close preview"
               src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAxNSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xLjcyMDI5IDAuMjgwNzEyQzEuNTMxNjkgMC4wOTg1NTM3IDEuMjc5MDggLTAuMDAyMjQwNjIgMS4wMTY4OSAzLjc4MDI2ZS0wNUMwLjc1NDY5IDAuMDAyMzE2MjIgMC41MDM4NzggMC4xMDc0ODUgMC4zMTg0NyAwLjI5Mjg5NEMwLjEzMzA2MSAwLjQ3ODMwMiAwLjAyNzg5MjMgMC43MjkxMTQgMC4wMjU2MTM5IDAuOTkxMzExQzAuMDIzMzM1NSAxLjI1MzUxIDAuMTI0MTMgMS41MDYxMSAwLjMwNjI4OCAxLjY5NDcxTDYuMDgxMjkgNy40Njk3MUwwLjMwNTI4OCAxMy4yNDQ3QzAuMjA5Nzc4IDEzLjMzNyAwLjEzMzU5NSAxMy40NDczIDAuMDgxMTg2NCAxMy41NjkzQzAuMDI4Nzc3NCAxMy42OTEzIDAuMDAxMTkxNTcgMTMuODIyNSAzLjc3NTcxZS0wNSAxMy45NTUzQy0wLjAwMTExNjA2IDE0LjA4ODEgMC4wMjQxODU0IDE0LjIxOTggMC4wNzQ0NjYzIDE0LjM0MjdDMC4xMjQ3NDcgMTQuNDY1NiAwLjE5OSAxNC41NzcyIDAuMjkyODkzIDE0LjY3MTFDMC4zODY3ODYgMTQuNzY1IDAuNDk4NDM4IDE0LjgzOTMgMC42MjEzMzQgMTQuODg5NUMwLjc0NDIzIDE0LjkzOTggMC44NzU5MSAxNC45NjUxIDEuMDA4NjkgMTQuOTY0QzEuMTQxNDcgMTQuOTYyOCAxLjI3MjY5IDE0LjkzNTIgMS4zOTQ2OSAxNC44ODI4QzEuNTE2NyAxNC44MzA0IDEuNjI3MDQgMTQuNzU0MiAxLjcxOTI5IDE0LjY1ODdMNy40OTUyOSA4Ljg4MzcxTDEzLjI3MDMgMTQuNjU4N0MxMy40NTg5IDE0Ljg0MDkgMTMuNzExNSAxNC45NDE3IDEzLjk3MzcgMTQuOTM5NEMxNC4yMzU5IDE0LjkzNzEgMTQuNDg2NyAxNC44MzE5IDE0LjY3MjEgMTQuNjQ2NUMxNC44NTc1IDE0LjQ2MTEgMTQuOTYyNyAxNC4yMTAzIDE0Ljk2NSAxMy45NDgxQzE0Ljk2NzIgMTMuNjg1OSAxNC44NjY0IDEzLjQzMzMgMTQuNjg0MyAxMy4yNDQ3TDguOTA5MjkgNy40Njk3MUwxNC42ODQzIDEuNjk0NzFDMTQuODY2NCAxLjUwNjExIDE0Ljk2NzIgMS4yNTM1MSAxNC45NjUgMC45OTEzMTFDMTQuOTYyNyAwLjcyOTExNCAxNC44NTc1IDAuNDc4MzAyIDE0LjY3MjEgMC4yOTI4OTRDMTQuNDg2NyAwLjEwNzQ4NSAxNC4yMzU5IDAuMDAyMzE2MjIgMTMuOTczNyAzLjc4MDI2ZS0wNUMxMy43MTE1IC0wLjAwMjI0MDYyIDEzLjQ1ODkgMC4wOTg1NTM3IDEzLjI3MDMgMC4yODA3MTJMNy40OTUyOSA2LjA1NTcxTDEuNzIwMjkgMC4yNzk3MTJWMC4yODA3MTJaIiBmaWxsPSJ3aGl0ZSIvPg0KPC9zdmc+DQo=" />
        </div>
        <button class="btn sm:hidden bg-blur add-button grow"
                (click)="productService.addToCart(productService.selectedProduct)"
                [disabled]="checkSize()">Add to cart
        </button>
        <div class="preview-button grid place-content-center text-center pop"
             (click)="productService.preview = !productService.preview">
          <img *ngIf="productService.preview"
               alt="hide"
               src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyOCAyNSIgZmlsbD0id2hpdGUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNMjMuMzc4MiAxOC42OTI1QzI2LjM1NDkgMTUuNzg3NiAyNy45OTk5IDEyLjQ5NjIgMjcuOTk5OSAxMi40OTYyQzI3Ljk5OTkgMTIuNDk2MiAyMi43NDk5IDEuOTcxMTkgMTMuOTk5OSAxLjk3MTE5QzEyLjMxOTIgMS45Nzc1MiAxMC42NTc1IDIuMzYwNDcgOS4xMTc0MyAzLjA5NjQxTDEwLjQ2NDkgNC41NzE4MkMxMS41OTc5IDQuMTIwNSAxMi43OTQxIDMuODg4MDQgMTMuOTk5OSAzLjg4NDgzQzE3LjcwOTkgMy44ODQ4MyAyMC43ODgyIDYuMTE5OTUgMjMuMDQzOSA4LjU4NjYzQzI0LjEyOTYgOS43ODAxNCAyNS4xMDI4IDExLjA4OTkgMjUuOTQ4OSAxMi40OTYyQzI1Ljg0NzQgMTIuNjYyNyAyNS43MzU0IDEyLjg0NjQgMjUuNjA3NyAxMy4wNDczQzI1LjAyMTQgMTMuOTY1OSAyNC4xNTUyIDE1LjE5MDYgMjMuMDQzOSAxNi40MDU3QzIyLjc1NTIgMTYuNzIxNSAyMi40NTQyIDE3LjAzMzQgMjIuMTM5MiAxNy4zMzU4TDIzLjM3ODIgMTguNjkyNVoiIGZpbGw9IndoaXRlIi8+DQo8cGF0aCBkPSJNMTkuNzY5NiAxNC43NDY1QzIwLjE2MDIgMTMuNTUyMSAyMC4yMzI1IDEyLjI2MSAxOS45NzgyIDExLjAyMzRDMTkuNzIzOSA5Ljc4NTc5IDE5LjE1MzQgOC42NTI2IDE4LjMzMzIgNy43NTU2NkMxNy41MTMgNi44NTg3MyAxNi40NzY3IDYuMjM0OTQgMTUuMzQ0OSA1Ljk1Njg3QzE0LjIxMzEgNS42Nzg3OSAxMy4wMzI0IDUuNzU3ODggMTEuOTQwMSA2LjE4NDkyTDEzLjM4MDQgNy43NTk4NEMxNC4wNTI5IDcuNjU0NTcgMTQuNzM4NyA3LjcyMjAzIDE1LjM4MzIgNy45NTY4N0MxNi4wMjc4IDguMTkxNzEgMTYuNjEzNSA4LjU4NzQ3IDE3LjA5MzkgOS4xMTI4QzE3LjU3NDMgOS42MzgxMyAxNy45MzYyIDEwLjI3ODYgMTguMTUxIDEwLjk4MzRDMTguMzY1NyAxMS42ODgyIDE4LjQyNzQgMTIuNDM4MSAxOC4zMzExIDEzLjE3MzVMMTkuNzY5NiAxNC43NDY1Wk0xNC42MTk0IDE3LjIzMjNMMTYuMDU3OSAxOC44MDUzQzE0Ljk2NTYgMTkuMjMyNCAxMy43ODQ5IDE5LjMxMTUgMTIuNjUzMSAxOS4wMzM0QzExLjUyMTQgMTguNzU1MyAxMC40ODUxIDE4LjEzMTUgOS42NjQ4MiAxNy4yMzQ2QzguODQ0NTkgMTYuMzM3NyA4LjI3NDEzIDE1LjIwNDUgOC4wMTk4NCAxMy45NjY5QzcuNzY1NTUgMTIuNzI5MyA3LjgzNzg3IDExLjQzODEgOC4yMjgzOSAxMC4yNDM3TDkuNjY4NjQgMTEuODE4N0M5LjU3MjM4IDEyLjU1NDEgOS42MzQwNyAxMy4zMDM5IDkuODQ4ODIgMTQuMDA4OEMxMC4wNjM2IDE0LjcxMzYgMTAuNDI1NSAxNS4zNTQgMTAuOTA1OSAxNS44Nzk0QzExLjM4NjMgMTYuNDA0NyAxMS45NzIgMTYuODAwNSAxMi42MTY2IDE3LjAzNTNDMTMuMjYxMSAxNy4yNzAxIDEzLjk0NjggMTcuMzM3NiAxNC42MTk0IDE3LjIzMjNWMTcuMjMyM1oiIGZpbGw9IndoaXRlIi8+DQo8cGF0aCBkPSJNNS44NjI1IDcuNjU0NjZDNS41NDc1IDcuOTYwODQgNS4yNDQ3NSA4LjI3MDg1IDQuOTU2IDguNTg2NkMzLjg3MDM4IDkuNzgwMTEgMi44OTcxNiAxMS4wODk5IDIuMDUxIDEyLjQ5NjJMMi4zOTIyNSAxMy4wNDczQzIuOTc4NSAxMy45NjU4IDMuODQ0NzUgMTUuMTkwNiA0Ljk1NiAxNi40MDU3QzcuMjExNzUgMTguODcyNCAxMC4yOTE3IDIxLjEwNzUgMTQgMjEuMTA3NUMxNS4yNTMgMjEuMTA3NSAxNi40MzI1IDIwLjg1MyAxNy41MzUgMjAuNDE4NkwxOC44ODI1IDIxLjg5NTlDMTcuMzQyNCAyMi42MzE4IDE1LjY4MDcgMjMuMDE0OCAxNCAyMy4wMjExQzUuMjUgMjMuMDIxMSAwIDEyLjQ5NjIgMCAxMi40OTYyQzAgMTIuNDk2MiAxLjY0MzI1IDkuMjAyNzkgNC42MjE3NSA2LjI5OThMNS44NjA3NSA3LjY1NjU3TDUuODYyNSA3LjY1NDY2Wk0yMy44ODA1IDI0LjY1NTRMMi44ODA1IDEuNjkxNzdMNC4xMTk1IDAuMzM2OTE0TDI1LjExOTUgMjMuMzAwNUwyMy44ODA1IDI0LjY1NTRaIiBmaWxsPSJ3aGl0ZSIvPg0KPC9zdmc+DQo=" />
          <img *ngIf="!productService.preview"
               alt="show"
               src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMzEiIHZpZXdCb3g9IjAgMCAyOCAzMSIgZmlsbD0id2hpdGUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cGF0aCBkPSJNMjggMTUuNDk2MkMyOCAxNS40OTYyIDIyLjc1IDQuOTcxMTkgMTQgNC45NzExOUM1LjI1IDQuOTcxMTkgMCAxNS40OTYyIDAgMTUuNDk2MkMwIDE1LjQ5NjIgNS4yNSAyNi4wMjEyIDE0IDI2LjAyMTJDMjIuNzUgMjYuMDIxMiAyOCAxNS40OTYyIDI4IDE1LjQ5NjJaTTIuMDUyNzUgMTUuNDk2MkMyLjg5ODkgMTQuMDg5OSAzLjg3MjEyIDEyLjc4MDEgNC45NTc3NSAxMS41ODY2QzcuMjEgOS4xMTk5NSAxMC4yOSA2Ljg4NDgzIDE0IDYuODg0ODNDMTcuNzEgNi44ODQ4MyAyMC43ODgzIDkuMTE5OTUgMjMuMDQ0IDExLjU4NjZDMjQuMTI5NiAxMi43ODAxIDI1LjEwMjggMTQuMDg5OSAyNS45NDkgMTUuNDk2MkMyNS44NDc1IDE1LjY2MjcgMjUuNzM1NSAxNS44NDY0IDI1LjYwNzggMTYuMDQ3M0MyNS4wMjE1IDE2Ljk2NTkgMjQuMTU1MyAxOC4xOTA2IDIzLjA0NCAxOS40MDU3QzIwLjc4ODMgMjEuODcyNCAxNy43MDgyIDI0LjEwNzUgMTQgMjQuMTA3NUMxMC4yOSAyNC4xMDc1IDcuMjExNzUgMjEuODcyNCA0Ljk1NiAxOS40MDU3QzMuODcwMzggMTguMjEyMiAyLjg5NzE2IDE2LjkwMjUgMi4wNTEgMTUuNDk2MkgyLjA1Mjc1WiIgZmlsbD0id2hpdGUiLz4NCjxwYXRoIGQ9Ik0xNCAxMC43MTJDMTIuODM5NyAxMC43MTIgMTEuNzI2OSAxMS4yMTYgMTAuOTA2NCAxMi4xMTMyQzEwLjA4NTkgMTMuMDEwNCA5LjYyNSAxNC4yMjcyIDkuNjI1IDE1LjQ5NjFDOS42MjUgMTYuNzY0OSAxMC4wODU5IDE3Ljk4MTcgMTAuOTA2NCAxOC44Nzg5QzExLjcyNjkgMTkuNzc2MSAxMi44Mzk3IDIwLjI4MDIgMTQgMjAuMjgwMkMxNS4xNjAzIDIwLjI4MDIgMTYuMjczMSAxOS43NzYxIDE3LjA5MzYgMTguODc4OUMxNy45MTQxIDE3Ljk4MTcgMTguMzc1IDE2Ljc2NDkgMTguMzc1IDE1LjQ5NjFDMTguMzc1IDE0LjIyNzIgMTcuOTE0MSAxMy4wMTA0IDE3LjA5MzYgMTIuMTEzMkMxNi4yNzMxIDExLjIxNiAxNS4xNjAzIDEwLjcxMiAxNCAxMC43MTJaTTcuODc1IDE1LjQ5NjFDNy44NzUgMTMuNzE5NyA4LjUyMDMxIDEyLjAxNjEgOS42Njg5NyAxMC43NjAxQzEwLjgxNzYgOS41MDM5OSAxMi4zNzU1IDguNzk4MzQgMTQgOC43OTgzNEMxNS42MjQ1IDguNzk4MzQgMTcuMTgyNCA5LjUwMzk5IDE4LjMzMSAxMC43NjAxQzE5LjQ3OTcgMTIuMDE2MSAyMC4xMjUgMTMuNzE5NyAyMC4xMjUgMTUuNDk2MUMyMC4xMjUgMTcuMjcyNCAxOS40Nzk3IDE4Ljk3NiAxOC4zMzEgMjAuMjMyMUMxNy4xODI0IDIxLjQ4ODEgMTUuNjI0NSAyMi4xOTM4IDE0IDIyLjE5MzhDMTIuMzc1NSAyMi4xOTM4IDEwLjgxNzYgMjEuNDg4MSA5LjY2ODk3IDIwLjIzMjFDOC41MjAzMSAxOC45NzYgNy44NzUgMTcuMjcyNCA3Ljg3NSAxNS40OTYxWiIgZmlsbD0id2hpdGUiLz4NCjwvc3ZnPg0K" />
        </div>
      </div>
    </div>
  </div>
</div>
