<div class="content">
  <div class="min-h-screen flex flex-col px-4 mx-auto nav-pad black-filter">
    <div id="nav"
         class="flex flex-row invisible">
      <div class="nav-items grow"
           [ngClass]="{active: isFirst}"
           *ngFor="let products of
                 productService.products; let isFirst = first; ">
        <h3>{{products.name}}</h3>
      </div>
    </div>
    <div class="flex flex-col gap-5 mb-5">
      <div [id]="products.name"
           *ngFor="let products of productService.products">
        <h2 class="uppercase">{{products.name}}</h2>
        <div class="flex flex-wrap ">
          <!-- Product Items -->
          <div class="pt-4 px-1 basis-1/3 md:basis-1/6 product"
               [id]="i"
               *ngFor="let product of productService.sortBy(products.items, 'order'); index as i;">
            <img [src]="product.images[0].src"
                 alt="{{product.images[0].alt}}"
                 (click)="viewProduct = true;selectProduct(product);">
            <p class="mt-2 uppercase text-center product-title">{{product.name}}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div id="product-view"
     *ngIf="showProductCard"
     class="h-screen w-screen fixed">
  <img src="../../../assets/img/desktop-store-bg.jpg"
       alt=""
       class="sm:hidden md:block background-image" />
  <img src="../../../assets/img/mobile-store-bg.jpg"
       alt=""
       class="sm:block md:hidden background-image" />
  <div id="card-container"
       class="absolute h-screen w-screen grid place-content-center">
    <div class="card relative mt-2.5 w-min border-2 border-solid border-white">
      <h2 class="mt-3 text-center uppercase"> {{selectedProduct.name}}</h2>
      <div id="sliders"
           class="mx-auto"
           [ngClass]="{'opacity-1': preview, 'opacity-0': !preview}">
        <div id="main-slider"
             class="splide mx-auto mt-1 px-12 ">
          <div class="splide__track">
            <ul class="splide__list">
              <li class="splide__slide"
                  *ngFor="let image of productService.sortBy(selectedProduct.images, 'order');">
                <img alt="{{image.alt}}"
                     [defaultImage]="defaultImage"
                     [lazyLoad]="image.src"
                     [src]="image.src" />
              </li>
            </ul>
          </div>
        </div>
        <div id="thumbnail-slider"
             class="splide mx-auto px-12 py-3">
          <div class="splide__track">
            <ul class="splide__list">
              <li class="splide__slide"
                  *ngFor="let image of productService.sortBy(selectedProduct.images, 'order')">
                <img alt="{{image.alt}}"
                     [defaultImage]="defaultImage"
                     [lazyLoad]="image.src"
                     [src]="image.src" />

              </li>
            </ul>
          </div>
        </div>
      </div>
      <ng-container *ngIf="!preview">
        <div id="preview-description"
             class="absolute w-full h-full inset-0 bg-no-repeat bg-cover bg-scroll "
             [ngStyle]="{'backgroundImage': 'url(' + selectedProductFirstImage.src + ')'}">
          <div [ngClass]="{'opacity-100': !preview, 'opacity-0' : preview}"
               class="details-container grid justify-items-center content-between relative w-full h-full p-3">
            <h2 class="relative text-center uppercase"> {{selectedProduct.name}}</h2>
            <div>
              <h4 class="relative mt-5 mb-2 text-center uppercase">Description</h4>
              <div class="description overflow-y-auto mb-3">
                <p class="text-center">
                  {{selectedProduct.description}}
                </p>
              </div>
            </div>
            <div class="price mb-2 sm:mb-0">

              <div *ngIf="selectedProductSizes"
                   class="size">
                <h3 class="mr-1"> Size: </h3>
                <div *ngFor="let size of selectedProduct.sizes; index as i"
                     [ngClass]="{'active': size.selected}"
                     (click)="selectSize(i)"
                     class="size-btn"> {{size.name}}</div>
              </div>
              <h3 class="price mt-2">
                Price: <span class="secondary-font"> {{selectedProduct.price | currency: 'EUR' }} </span>
              </h3>
            </div>
            <button class="btn hidden sm:block bg-blur"
                    (click)="productService.addToCart(selectedProduct)"
                    [disabled]="checkSize()">Add to cart</button>
          </div>
        </div>
      </ng-container>
      <div class="absolute w-full preview-toggler flex justify-center gap-5">
        <div class="preview-button grid place-content-center text-center pop"
             (click)="viewProduct = false;">
          <img src="../../../assets/icons/close.svg"
               alt="close preview">
        </div>
        <button class="btn sm:hidden bg-blur"
                (click)="productService.addToCart(selectedProduct)"
                [disabled]="checkSize()">Add to cart</button>
        <div class="preview-button grid place-content-center text-center pop"
             (click)="preview = !preview">
          <img [src]="preview ? previewButtonIcon.hide : previewButtonIcon.show"
               alt="">
        </div>
      </div>
    </div>
  </div>
</div>
